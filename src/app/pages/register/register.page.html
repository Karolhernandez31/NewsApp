<ion-header>
  <ion-toolbar>
    <ion-title>Formulario de Registro</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

    <!-- Name Field -->
    <ion-item>
      <ion-label position="stacked">Nombre</ion-label>
      <ion-input formControlName="name" type="text"></ion-input>
    </ion-item>
    @if (isInvalid('name')) {
      <div class="error-message">
        @if (isInvalid('name','required')) {
          <ion-text color="danger">El nombre es requerido</ion-text>
        }
        @if (isInvalid('name','minlength')) {
          <ion-text color="danger">El nombre debe tener al menos 3 caracteres</ion-text>
        }
        @if (isInvalid('name','pattern')) {
          <ion-text color="danger">El nombre no puede contener números</ion-text>
        }
      </div>
    }

    <!-- Last Name Field -->
    <ion-item>
      <ion-label position="stacked">Apellido</ion-label>
      <ion-input formControlName="lastName" type="text"></ion-input>
    </ion-item>
    @if (isInvalid('lastName')) {
      <div class="error-message">
        @if (isInvalid('lastName','required')) {
          <ion-text color="danger">El apellido es requerido</ion-text>
        }
        @if (isInvalid('lastName','minlength')) {
          <ion-text color="danger">El apellido debe tener al menos 3 caracteres</ion-text>
        }
        @if (isInvalid('lastName','pattern')) {
          <ion-text color="danger">El apellido no puede contener números</ion-text>
        }
      </div>
    }

    <!-- Country Field -->
    <ion-item>
      <ion-label position="stacked">País</ion-label>
      <ion-select formControlName="country" interface="action-sheet">
        @for (country of countries; track country.iso2) {
          <ion-select-option [value]="country.iso2">
            {{ country.name }}
          </ion-select-option>
        }
      </ion-select>
    </ion-item>
    @if (isInvalid('country')) {
      <div class="error-message">
        <ion-text color="danger">Debe seleccionar un país</ion-text>
      </div>
    }

    <!-- Email Field -->
    <ion-item>
      <ion-label position="stacked">Email</ion-label>
      <ion-input formControlName="email" type="email"></ion-input>
    </ion-item>
    @if (isInvalid('email')) {
      <div class="error-message">
        @if (isInvalid('email','required')) {
          <ion-text color="danger">El email es requerido</ion-text>
        }
        @if (isInvalid('email','email')) {
          <ion-text color="danger">Por favor ingrese un email válido</ion-text>
        }
      </div>
    }

    <!-- Password Field -->
    <ion-item>
      <ion-label position="stacked">Contraseña</ion-label>
      <ion-input formControlName="password" type="password"></ion-input>
    </ion-item>
    @if (isInvalid('password')) {
      <div class="error-message">
        @if (isInvalid('password','required')) {
          <ion-text color="danger">La contraseña es requerida</ion-text>
        }
        @if (isInvalid('password','minlength')) {
          <ion-text color="danger">La contraseña debe tener al menos 6 caracteres</ion-text>
        }
      </div>
    }

    <!-- Confirm Password Field -->
    <ion-item>
      <ion-label position="stacked">Confirmar Contraseña</ion-label>
      <ion-input formControlName="confirmPassword" type="password"></ion-input>
    </ion-item>
    @if (isInvalid('confirmPassword')) {
      <div class="error-message">
        @if (isInvalid('confirmPassword','required')) {
          <ion-text color="danger">Debe confirmar la contraseña</ion-text>
        }
        @if (isInvalid('confirmPassword','passwordMismatch')) {
          <ion-text color="danger">Las contraseñas no coinciden</ion-text>
        }
      </div>
    }

    <!-- Submit Button -->
    <ion-button type="submit" expand="block" [disabled]="!registerForm.valid">
      Registrarse
    </ion-button>
  </form>
</ion-content>
